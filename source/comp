#!/bin/bash

FIL=$@

# OpenMP compilation
#F77=ftn
#OPT='-openmp -parallel -fpp -traceback -check all -integer-size 64 -c'                            # Chet's options
#OPT='-O2 -openmp -integer-size 64 -fp-model strict -no-ftz -c'                                # UIUC cluster options
#OPT='-O2 -openmp -openmp-link static -integer-size 64 -fp-model strict -no-ftz -xHOST -ipo -c'    # LionXF/PSU cluster options
#OPT='-O2 -openmp -traceback -check all -integer-size 64 -fp-model strict -no-ftz -ipo -c'         # Debug options
#OPT='-O2 -fast -mp=nonuma -i8 -r8 -Mnoflushz -Ktrap=fp -c' # PGI
#OPT='-O2 -s default64 -Ktrap=fp -c' # Cray

# Hybrid MPI/OpenMP compilation
F77=ftn
#OPT='-O2 -openmp -integer-size 64 -fp-model strict -no-ftz -DMPI32 -c' # Intel
#OPT='-O2 -mp=nonuma -i8 -i8storage -r8 -Mnoflushz -Ktrap=fp -default64 -c' # PGI64
#OPT='-O2 -mp=nonuma -i8 -i8storage -r8 -Mnoflushz -Ktrap=fp -DMPI32 -c' # PGI32
OPT='-O2 -s default64 -Ktrap=fp -c' #Cray

set echo

echo Compiling $FIL with $F77 with options $OPT ...

$F77 $OPT $FIL

echo Done.

unset echo

